---
title: "第七章 无线网络和移动网络"
description: ""
lead: ""
date: 2021-04-09T23:23:06+08:00
lastmod: 2021-04-09T23:23:06+08:00
draft: false
images: []
menu: 
  docs:
    parent: "computer-network"
weight: 13
toc: true
---

## 7.1 概述

+ 无线主机：无线主机可以是便携机，掌上机，智能手机或者桌面计算机。
+ 无线链路：主机通过无线通信链路连接到一个基站或者另一台无线主机。
+ 基站：基站是无线网络基础设施的一个关键部分。
+ 蜂窝塔：cell tower
+ 接入点：access point
+ 网络基础设施：这是无线主机希望与之进行通信的更大网络。

## 7.3 WIFI：802.11 无线LAN

### 7.3.1 802.11 体系结构

+ 主要工作频段：2.4GHz和5GHz
+ 基本服务集（BSS）：一个BSS包含一个或多个无线站点和一个在802.11术语中称为**接入点**（AP）的中央基站。

#### 信道与关联

+ 服务集标识符（SSID）：当网络管理员安装一个AP时，管理员为该接入点分配一个单字或双字的服务集标识符。
+ 在85MHz这个频段内，802.11定义了11个部分重叠的信道。当且仅当两个信道由4个或更多信道隔开时它们才无重叠。1，6，11是唯一的3个非重叠信道的集合。
+ WIFI丛林：是一个任意物理位置，在这里无线站点能从两个或多个AP中收到很强的信号。
+ 关联：无线站点在自身与AP之间建立一条虚拟线路。
+ 信标帧：802.11标准要求每个AP周期性地发送信标帧，每个信标帧包括该AP的SSID和MAC地址。
+ 被动扫描：
  + 每个AP每个一定时间在自身所在信道中发送一个信标帧(含AP的SSID(服务集标识)和MAC地址)。
  + 设备扫描所有信道获取信标帧，选择一个AP发送关联请求帧
  + AP向设备发送关联响应帧
+ 主动扫描：
  + 设备发送广播探测帧。
  + AP发送探测响应。
  + 设备选择AP发送关联请求帧。
  + AP向设备发送关联响应帧。

### 7.3.2 802.11 MAC协议

+ 因为许多无线设备或AP自身可能希望同时经过相同信道传输数据帧，因此需要一个多路访问协议来协调传输。
+ 802.11采用的随机访问协议称为**带碰撞避免的CSMA**（CSMA/CA）
+ 不用CSMA/CD的原因：
  + 检测碰撞的能力要求站点具有同时发送和接收的能力。因为在802.11适配器上，接收信号的强度通常远远小于发送信号的强度，制造具有检测碰撞能力的硬件代价较大。
  + 更重要的是，即使适配器可以同时发送和监听信号，适配器也会由于隐藏终端问题和衰减问题而无法检测到所有的碰撞。
+ **链路层确认方案**：目的站点收到一个通过CRC校验的帧后，它等待一个被称作短帧间间隔（SIFS）的一小段时间，然后发回一个确认帧。如果发送站点在给定的时间内未收到确认帧，它假定出现了错误并重传该帧，使用CSMA/CA访问该信道。如果在若干固定次重传之后仍未收到确认，发送站点将放弃发送并丢弃该帧。
+ **CSMA/CA协议过程**：
  1. 如果某站点最初监听到信道空闲，它将在一个被称为分布式帧间间隔（DIFS）的短时间段后发送该帧。
  2. 否则，该站点选取一个随机回退值并且在侦听到信道空闲时递减该值。当侦听到信道忙时，计数值保持不变。
  3. 当计数值减为0时，该站点发送整个数据帧并等待确认。
  4. 如果收到确认，发送站点直到它的帧也被目的站正确接收了。如果该站点要发送另一帧，它将从第二步开始CSMA/CS协议。如果未收到确认，发送站点将重新进入第二步中的回退阶段，并从一个更大的范围内选取随机值。

#### 1. 处理隐藏终端：RTS和CTS

+ 问题描述；假定站点H1正在传输一个帧，并且在H1传输的中途，站点H2要向AP发送一个帧。由于H2未听到来自H1的传输，它将首先等待一个DIFS间隔，然后发送该帧，导致产生了一个碰撞。从而在H1和H2的整个发送阶段，信道都被浪费了。
+ 解决方法：802.11协议允许站点使用一个短**请求发送**（RTS）控制帧和一个短**允许发送**（CTS）控制帧来预约对信道的访问。当发送方要发送一个DATA帧时，它能够首先向AP发送一个RTS帧，指示传输DATA帧和确认（ACK）帧需要的总时间。当AP收到RTS帧后，它广播一个CTS帧作为响应。该CTS帧有两个目的：给发送方明确的发送许可，也指示其他站点在预约期内不要发送。
+ 加上RTS和CTS的传输过程
  {{< img src="CSMACA传输过程.png" alt="Rectangle" class="border-0" >}}

### 7.3.3 IEEE 802.11帧

+ 帧结构
  {{< img src="802.11帧.png" alt="Rectangle" class="border-0" >}}
+ 有效荷载与CRC字段
+ 地址字段：第4个地址用于自组织模式中相互转发；地址2时传输该帧的站点的MAC地址（源地址）；地址1是接收该帧的无线站点的MAC地址；地址3是与子网相连的路由器接口的MAC地址
+ 序号、持续期和帧控制字段
  + 序号可以使接收方区分新传输的帧和以前帧的重传
  + 持续期字段用于预约信道一段时间
  + 控制字段包括许多子字段，有类型和子类型字段等。
