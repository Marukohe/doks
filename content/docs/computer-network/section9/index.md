---
title: "第九章 多媒体网络"
description: ""
lead: ""
date: 2021-04-09T23:23:09+08:00
lastmod: 2021-04-09T23:23:09+08:00
draft: false
images: []
menu: 
  docs:
    parent: "computer-network"
weight: 14
toc: true
---

## 9.1 多媒体网络应用

### 9.1.1 视频的性质

+ 视频最为显著的特征也许是它的**高比特率**

### 9.1.2 音频的性质

+ **脉冲编码调制**

### 9.1.3 多媒体网络应用的类型

+ 流式存储音频/视频
+ 会话式IP语音/视频
+ 流式实况音频/视频

#### 1. 流式存储音频和视频

+ **流**：在流式存储视频应用中，客户开始从服务器接收文件几秒之后，通常就开始播放视频。这意味着当客户正在从视频的一个位置开始播放时，与此同时正在从服务器接收该视频的后续部分。这种技术被称为**流**，它避免了在开始播放之前必须下载整个视频。
+ 相互作用：用户对播放媒体的控制。
+ 连续播放。

#### 2. 会话式IP语音和视频

#### 3. 流式实况音频和视频

## 9.2 流式存储视频

+ 流式视频系统可分为三种类型：
  + UDP流
  + HTTP流
  + 适应性HTTP流
+ 这三种形式的视频流的共同特点时广泛适应了客户端应用缓存，以此来缓解变化的端到端时延和变化的服务器和客户之间可用带宽量的影响。
+ 视频流中的客户播放时延
  {{< img src="视频流.png" alt="Rectangle" class="border-0" >}}

### 9.2.1 UDP流

+ 三个缺点：
  + 由于服务器和控制之间的可用带宽无法预测并且时变化的，恒定速率的UDP流不能够提供连续的播放。
  + 它要求如RTSP服务器这样的媒体控制服务器，以对每个进行中的客户会话处理客户到服务器的交互请求和跟踪客户状态。
  + **许多防火墙配置为阻塞UDP流量，防止这些防火墙后面的用户接收UDP视频**。

### 9.2.2 HTTP流

+ 在HTTP流中，视频直接作为具有一个特定URL的普通文件存储在HTTP服务器上。

#### 1. 预取视频

+ 对于流式存储视频，客户能够尝试以高于消耗速率的速率下载视频，因此预取将来会被消耗的视频帧。

#### 2. 客户应用缓存和TCP缓存

+ 当使用HTTP流时，一个满的客户应用缓存间接地对服务器到客户能够发送的视频速率施加了限制
  {{< img src="HTTP流视频.png" alt="Rectangle" class="border-0" >}}

#### 3. 流式视频的分析

+ $B$表示客户应用缓存的长度（按比特计）
+ $Q$表示在客户应用缓存开始播放之前必须被缓存的比特数量
+ $r$表示视频消耗速率
+ $t=t_p$视频开始播放
+ $t=t_f$客户应用缓存变满
+ 当网络中的可用速率大于视频速率时，在初始缓存时延后，用户将享受连续的播放直到视频结束。

#### 4. 视频的早期中止和重定位

## 9.3 IP语音

## 9.4 实时会话式应用的协议

## 9.5 支持多媒体的网络

+ 尽可能利用尽力而为服务。网络中偶然出现丢包和过大的端到端时延。当遇见到需求增加，ISP部署额外的带宽和交换能力以持续确保满意的时延和丢包性能。
+ 区分服务。不同类型的流量能够由不同类型的服务所提供。
+ 每连接服务质量（QoS）保证。使用没连接QoS保证，每个应用的实例显示地预约端到端带宽，并因此具有确保的端到端性能。**硬保证**意味着应用将必定接收到它所请求的服务质量。**软保证**意味着应用将以高概率接受到它所请求的服务质量。

### 9.5.1 定制尽力而为网络

### 9.5.2 提供多种类型的服务

#### 1. 促进思考的场景

+ 见解1：标记分组是的路由器区分属于不同类型流量的分组。
+ 见解2：希望在流量类型之间提供流量隔离的度，以便一类流量不会受到另一类异常流量的负面影响。
+ 见解3：当为流量类型或流之间提供隔离时，希望尽可能有效地使用资源（例如链路带宽和缓存）

#### 2. 调度机制

+ 属于各种网络流的分组被复用在一起，并且在与链路关联的输出缓存排队等待传输。选择在链路上传输的排队分组的方式称为**链路调度规则**。

#### 3. 监管：漏桶

+ 监管规则：
  + 平均速率：限制一个流的分组能够发送到网络中的长期平均速率
  + 峰值速率：限制了一个较短时间内能够发送的最大分组数
  + 突发长度：限制极短的时间间隔内能够发送到网络中的最大分组数（时间间隔长度趋于0）
+ **漏桶**：漏桶由一个能够容纳$b$个令牌的桶组成。令牌加进该桶的过程如下。可能潜在地加入桶中的新令牌总是以每秒$r$个令牌的速率产生。当产生一个令牌时，如果桶填充得少于$b$个令牌，新产生的令牌加入该桶中；否则忽略该新长生的令牌，令牌桶保持具有$b$个令牌的满状态。
  {{< img src="令牌桶.png" alt="Rectangle" class="border-0" >}}
+ 漏桶规则：
  + 在一个分组向网络传输之前，必须首先从令牌桶中去除一个令牌
  + 如果令牌桶时空的，分组必须等待一个令牌
+ 效果：
  + 平均速率：$r+b/t$，令牌产生速率$r$用于限制分组能够进入网络的长期平均速率
  + 突发长度：$b$
  + 峰值速率：在已有的一个漏桶后，串联一个高度为1的桶，其速率为$r'$可限制峰值速率。

#### 4. 漏桶+加权公平排队=队列中可证明的最大时延

$$
d_{max}=\frac{b_1}{R\cdot\frac{w_1}{\sum w_j}}
$$

### 9.5.3 区分功能

+ 边界功能：分组分类和流量调节
+ 核心功能：转发

### 9.5.4 每连接服务质量保证：资源预约和呼叫准入

+ 见解4：如果不总是能够提供充分的资源，并且要确保QoS，则需要一个呼叫准入过程，在这个过程中流申告其QoS需求，然后要么被网路准入（以所要求的QoS），要么被网络阻塞（如果网络不能提供所要求的QoS）。
+ **资源预留**
+ **呼叫准入**
+ **呼叫建立信令**
